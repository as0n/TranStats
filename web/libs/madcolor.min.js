madcolor=function(){function t(t){return Math.floor(Math.random()*t)}function e(t){for(var e=t.toString(16);e.length<2;)e="0"+e;return e}function r(){if(this.coefs=[],arguments[0]instanceof Array)this.coefs=arguments[0];else for(var t=0;t<arguments.length;t++)this.coefs.push(arguments[t])}function a(t,e,r){this.r=Math.min(Math.max(Math.round(t),0),255),this.g=Math.min(Math.max(Math.round(e),0),255),this.b=Math.min(Math.max(Math.round(r),0),255)}function n(t,e){function n(e){var r=e.toString();y.showHexCode&&(l.textContent=r),t.style.backgroundColor=r}function i(){a.list.shift(),a.list.push(a.random(y.colorRange)),S=r.fromColorList(a.list,b),v=new Date}function s(){var t=(new Date-v)/(1e3*y.colorPeriod),e=new a(S.r.calc(t),S.g.calc(t),S.b.calc(t)),r=e.toHSV(),o=r.h/360*p,i=(1-r.v)*m;if(n(e),y.showMap){imgdata=g.getImageData(0,0,p,m);for(var s=0;s<imgdata.data.length/4;s++)imgdata.data[4*s+3]=Math.max(0,imgdata.data[4*s+3]-10);g.clearRect(0,0,p,m),g.putImageData(imgdata,0,0),g.beginPath(),g.moveTo(M,w),g.lineTo(o,i),g.stroke()}M=o,w=i}var l,h,c,u,d,g,m,p,v,M,w,y={},S={r:null,g:null,b:null};e||(e={});for(f in o)y[f]=void 0!==e[f]?e[f]:o[f].default;var b=Math.floor(y.listSize/2);if(y.showHexCode&&(l=document.createElement("p"),l.className="caption hexCode",t.appendChild(l)),y.showMap){var x=document.createElement("div");x.className="caption map",h=document.createElement("div"),h.id="canvaslist",x.appendChild(h),t.appendChild(x),m=h.clientHeight,p=h.clientWidth,c=document.createElement("canvas"),d=c.getContext("2d"),u=document.createElement("canvas"),g=u.getContext("2d"),u.height=c.height=m,u.width=c.width=p,g.fillStyle=g.strokeStyle="#ffffff",g.lineWidth=2,h.appendChild(c),h.appendChild(u);for(var C=0;p>C;C++)for(var H=0;m>H;H++){var P=Math.round(360*C/p),V=1-H/m;d.fillStyle=a.fromHSV(P,1,V).toString(),d.fillRect(C,H,1,1)}}for(;a.list.length<y.listSize;)a.list.push(a.random(y.colorRange));t.style.transitionDuration=y.displayPeriod+"s",i(),setInterval(i,1e3*y.colorPeriod),setInterval(s,1e3*y.displayPeriod)}var o={colorPeriod:{"default":2,attr:"mc-color-period",parser:parseFloat},displayPeriod:{"default":.2,attr:"mc-display-period",parser:parseFloat},listSize:{"default":5,attr:"mc-list-size",parser:parseInt},showMap:{"default":!0,attr:"mc-show-map",parser:function(t){return"true"===t?!0:"false"===t?!1:null}},showHexCode:{"default":!0,attr:"mc-show-hexcode",parser:function(t){return"true"===t?!0:"false"===t?!1:null}},colorRange:{"default":255,attr:"mc-color-range",parser:parseInt}};r.eval=function(t,e){return 0==t.length?0:t.shift()+e*r.eval(t,e)},r.lagrange=function(t){for(var e=new r,a=0;a<t.length;a++){for(var n=new r(1),o=t[a],i=0;i<t.length;i++){var s=t[i];if(i!=a){var l=new r(-s[0],1).lin(1/(o[0]-s[0]));n=n.mult(l)}}e=e.add(n.lin(o[1]))}return e},r.fromColorList=function(t,e){for(var a=[],n=[],o=[],i=0;i<t.length;i++)a.push([i-e,t[i].r]),n.push([i-e,t[i].g]),o.push([i-e,t[i].b]);return{r:r.lagrange(a),g:r.lagrange(n),b:r.lagrange(o)}},r.prototype.coef=function(t){return this.coefs[t]||0},r.prototype.calc=function(t){return r.eval(this.coefs.slice(),t)},r.prototype.add=function(t){for(var e=Math.max(this.coefs.length,t.coefs.length),a=[],n=0;e>n;n++)a.push(this.coef(n)+t.coef(n));return new r(a)},r.prototype.lin=function(t){for(var e=[],a=0;a<this.coefs.length;a++)e.push(t*this.coef(a));return new r(e)},r.prototype.mult=function(t){for(var e=this.coefs.length+t.coefs.length-1,a=[],n=0;e>n;n++){a[n]=0;for(var o=0;n>=o;o++)a[n]+=this.coef(o)*t.coef(n-o)}return new r(a)},a.list=[],a.random=function(e){return new a(t(e),t(e),t(e))},a.randomSat=function(){return a.fromHSV(t(360),1,1)},a.HSVMat=function(t,e,r){return[[t,e,0],[e,t,0],[0,t,e],[0,e,t],[e,0,t],[t,0,e]][r]},a.fromHSV=function(t,e,r){var n=r*e,o=r-n,i=t%360/60,s=n*(1-Math.abs(i%2-1)),l=a.HSVMat(n,s,Math.floor(i));return new a(Math.round(255*(l[0]+o)),Math.round(255*(l[1]+o)),Math.round(255*(l[2]+o)))},a.prototype.toString=function(){var t="#"+e(this.r)+e(this.g)+e(this.b);return(-1!=t.indexOf("-")||7!=t.length)&&console.error("r : "+this.r+" / g : "+this.g+" / b : "+this.b+" -> "+t),t},a.prototype.toHSV=function(){var t=Math.max(this.r,Math.max(this.g,this.b)),e=Math.min(this.r,Math.min(this.g,this.b)),r=t-e,a=t==this.r?(this.g-this.b)/r%6:t==this.g?(this.b-this.r)/r+2:(this.r-this.g)/r+4,n=60*a;return{h:(n+360)%360,s:r/t,v:t/255}};for(var i=document.getElementsByClassName("mc"),s=0;s<i.length;s++){var l,h=i[s],c={};for(var f in o)l=h.getAttribute(o[f].attr),l&&(c[f]=o[f].parser(l));n(i[s],c)}return n.color=a,n}();